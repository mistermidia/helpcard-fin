(function(a){a.fn.theiaStickySidebar=function(b){function c(b,c){var e=d(b,c);e||(console.log("TSS: Body width smaller than options.minWidth. Init is delayed."),a(document).on("scroll."+b.namespace,function(b,c){return function(e){var f=d(b,c);f&&a(this).unbind(e)}}(b,c)),a(window).on("resize."+b.namespace,function(b,c){return function(e){var f=d(b,c);f&&a(this).unbind(e)}}(b,c)))}function d(b,c){return!0===b.initialized||!(a("body").width()<b.minWidth)&&(e(b,c),!0)}function e(b,c){b.initialized=!0;var d=a("#theia-sticky-sidebar-stylesheet-"+b.namespace);0===d.length&&a("head").append(a("<style id=\"theia-sticky-sidebar-stylesheet-"+b.namespace+"\">.theiaStickySidebar:after {content: \"\"; display: table; clear: both;}</style>")),c.each(function(){function c(){e.fixedScrollTop=0,e.sidebar.css({"min-height":"1px"}),e.stickySidebar.css({position:"static",width:"",transform:"none"})}function d(b){var c=b.height();return b.children().each(function(){c=Math.max(c,a(this).height())}),c}var e={};if(e.sidebar=a(this),e.options=b||{},e.container=a(e.options.containerSelector),0==e.container.length&&(e.container=e.sidebar.parent()),e.sidebar.parents().css("-webkit-transform","none"),e.sidebar.css({position:e.options.defaultPosition,overflow:"visible","-webkit-box-sizing":"border-box","-moz-box-sizing":"border-box","box-sizing":"border-box"}),e.stickySidebar=e.sidebar.find(".theiaStickySidebar"),0==e.stickySidebar.length){e.sidebar.find("script").filter(function(a,b){return 0===b.type.length||b.type.match(/(?:text|application)\/(?:x-)?(?:javascript|ecmascript)/i)}).remove(),e.stickySidebar=a("<div>").addClass("theiaStickySidebar").append(e.sidebar.children()),e.sidebar.append(e.stickySidebar)}e.marginBottom=parseInt(e.sidebar.css("margin-bottom")),e.paddingTop=parseInt(e.sidebar.css("padding-top")),e.paddingBottom=parseInt(e.sidebar.css("padding-bottom"));var g=e.stickySidebar.offset().top,h=e.stickySidebar.outerHeight();e.stickySidebar.css("padding-top",1),e.stickySidebar.css("padding-bottom",1),g-=e.stickySidebar.offset().top,h=e.stickySidebar.outerHeight()-h-g,0==g?(e.stickySidebar.css("padding-top",0),e.stickySidebarPaddingTop=0):e.stickySidebarPaddingTop=1,0==h?(e.stickySidebar.css("padding-bottom",0),e.stickySidebarPaddingBottom=0):e.stickySidebarPaddingBottom=1,e.previousScrollTop=null,e.fixedScrollTop=0,c(),e.onScroll=function(e){if(e.stickySidebar.is(":visible")){if(a("body").width()<e.options.minWidth)return void c();if(e.options.disableOnResponsiveLayouts){var g=e.sidebar.outerWidth("none"==e.sidebar.css("float"));if(g+50>e.container.width())return void c()}var h=a(document).scrollTop(),i="static";if(h>=e.sidebar.offset().top+(e.paddingTop-e.options.additionalMarginTop)){var j,k=e.paddingTop+b.additionalMarginTop,l=e.paddingBottom+e.marginBottom+b.additionalMarginBottom,m=e.sidebar.offset().top,n=e.sidebar.offset().top+d(e.container),o=0+b.additionalMarginTop,p=e.stickySidebar.outerHeight()+k+l<a(window).height();j=p?o+e.stickySidebar.outerHeight():a(window).height()-e.marginBottom-e.paddingBottom-b.additionalMarginBottom;var q=m-h+e.paddingTop,r=n-h-e.paddingBottom-e.marginBottom,s=e.stickySidebar.offset().top-h,t=e.previousScrollTop-h;"fixed"==e.stickySidebar.css("position")&&"modern"==e.options.sidebarBehavior&&(s+=t),"stick-to-top"==e.options.sidebarBehavior&&(s=b.additionalMarginTop),"stick-to-bottom"==e.options.sidebarBehavior&&(s=j-e.stickySidebar.outerHeight()),s=0<t?Math.min(s,o):Math.max(s,j-e.stickySidebar.outerHeight()),s=Math.max(s,q),s=Math.min(s,r-e.stickySidebar.outerHeight());var u=e.container.height()==e.stickySidebar.outerHeight();i=u||s!=o?u||s!=j-e.stickySidebar.outerHeight()?h+s-e.sidebar.offset().top-e.paddingTop<=b.additionalMarginTop?"static":"absolute":"fixed":"fixed"}if("fixed"==i){var v=a(document).scrollLeft();e.stickySidebar.css({position:"fixed",width:f(e.stickySidebar)+"px",transform:"translateY("+s+"px)",left:e.sidebar.offset().left+parseInt(e.sidebar.css("padding-left"))-v+"px",top:"0px"})}else if("absolute"==i){var w={};"absolute"!=e.stickySidebar.css("position")&&(w.position="absolute",w.transform="translateY("+(h+s-e.sidebar.offset().top-e.stickySidebarPaddingTop-e.stickySidebarPaddingBottom)+"px)",w.top="0px"),w.width=f(e.stickySidebar)+"px",w.left="",e.stickySidebar.css(w)}else"static"==i&&c();"static"!=i&&!0==e.options.AtualizaçõesidebarHeight&&e.sidebar.css({"min-height":e.stickySidebar.outerHeight()+e.stickySidebar.offset().top-e.sidebar.offset().top+e.paddingBottom}),e.previousScrollTop=h}},e.onScroll(e),a(document).on("scroll."+e.options.namespace,function(a){return function(){a.onScroll(a)}}(e)),a(window).on("resize."+e.options.namespace,function(a){return function(){a.stickySidebar.css({position:"static"}),a.onScroll(a)}}(e)),"undefined"!=typeof ResizeSensor&&new ResizeSensor(e.stickySidebar[0],function(a){return function(){a.onScroll(a)}}(e))})}function f(a){var b;try{b=a[0].getBoundingClientRect().width}catch(a){}return"undefined"==typeof b&&(b=a.width()),b}return b=a.extend({containerSelector:"",additionalMarginTop:0,additionalMarginBottom:0,AtualizaçõesidebarHeight:!0,minWidth:0,disableOnResponsiveLayouts:!0,sidebarBehavior:"modern",defaultPosition:"relative",namespace:"TSS"},b),b.additionalMarginTop=parseInt(b.additionalMarginTop)||0,b.additionalMarginBottom=parseInt(b.additionalMarginBottom)||0,c(b,this),this}})(jQuery);